
       _ _ ___/\______/\__ ____/\___/\__ _ _/\____ _/\_ __ __/\______
      __ ________   __   /   _   ___   / ______   \___/__/     _____/
         bIS/   /   /   /   //   //   /___/ __¬   /  /  /  /\__   \
           /   /   /   /   //   //   /   /  \    /  /  /  /   /   /
    __  _ _\____  /\____  //_  //_____  /___/\  /\_____  /\ _/   /___
     _  ___ _   \/  _  _\/_  \/____ __\/ ___ _\/_______\/____   /_ _/
                                                            \  /
                                  present                    \/

                      a door for AmiExpress 2.xx/3.xx:

                 >>> AquaBulls v1.0 by Aquarius/Outlaws <<<


                          Copyright ©1994 Aquarius

                 Permission is granted to freely distribute
               this product for non-commercial purposes only,
                  as long as all files remain unmodified.


Archive (OTL-AB10.LHA) Contents
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Doors/AquaBulls/
   AquaBulls                  11064 bytes  The door!
   AquaBulls.info               473 bytes  Config icon.
   AquaBulls.doc               8807 bytes  This document file!
   AquaBulls.guide            14710 bytes  AmigaGuide version of the doc.

Commands/BBSCmd/
   b.info                      1263 bytes  Command icon for /X 3.xx.


Introduction
~~~~~~~~~~~~
AquaBulls is a replacement for the AmiExpress 'b' command (for viewing the
normal bulletins). It is written in highly optimized C code for great
performance.


Features
~~~~~~~~
- You can have both global bulletins (for all conferences) and conference
  specific ones! If AquaBulls can't find a bulletin in the current
  conference, then it looks for it in the global directory 'Bulletins:'.
  But you can also have conferences where the global bulletins can't be
  accessed.

- Just like the built-in command, a bulletin can be specified on the
  command line. Then only that bulletin will be shown, after which
  AquaBulls exits.

- Two kinds of online updating are supported!

   1. Updating of all/many bulletins: When the user starts the door
      without giving a bulletin number on the command line, it checks for
      a particular script file (both in the conference and globally) and
      if that exists, the user gets the question whether he wants the
      bulletins to be updated or not, that is if the script(s) should be
      executed. But this can be access protected. In the config icon you
      specify the access level that is required for starting this script.

   2. Updating of specific bulletins: When a bulletin has been selected,
      the door checks if the update script for that bulletin exists and if
      it does, it is automatically executed.

  Note that if you don't want to use online updating you don't have to!

- The screen types (different text formats or languages) in AmiExpress
  3.xx (configurable in BBS:ScreenTypes.info) are supported. The door
  first looks for the bulletin of the screen type selected by the user and
  if it doesn't  exist it then tries the bulletin ending with ".TXT".

- With AmiExpress 2.xx, bulletins ending with ".TXT.GR" are first looked
  for (but only if ANSI is on), and if it can't be found the ".TXT"
  bulletin is shown.

- The screen is automatically cleared before each bulletin is shown.

- 'Who' doors show that the user is viewing bulletins when he's using
  AquaBulls. In fact, this was the thing that made me write this door. I
  was going to install a bulletin viewer on Nightfall and I tested several
  doors but all of them showed up in the who door as MODULE and not
  VIEWING BULLETINS! Very annoying... :-)

- Whether a user has access to read bulletins or not is determined from
  the access icons (/X 3.xx) or the CONFIG(x) file (/X 2.xx). But the door
  doesn't read those files. It still knows... So it doesn't matter if you
  set the door access too low. 10 is reasonable I guess...

- It allows you to write your own output (the BullHelp.txt)...


Requirements
~~~~~~~~~~~~
- Any Amiga model with AmiExpress installed (v2.20-v3.38, possibly other
  versions too).


Installation
~~~~~~~~~~~~
Make a directory in 'Doors:' called 'AquaBulls' and copy the door there,
and perhaps this document as well.


For AmiExpress 2.xx, add this to your BBS.CMD:

----Cut here------------------------------------
*B        XM010Doors:AquaBulls/AquaBulls
----Cut here------------------------------------
               ^^^^^^^^^^^^^^^^^^^^- File name of the door with full path.
            ^^^
            Access required to use the door.

For AmiExpress 3.x, just copy 'b.info' to your 'Commands/BBSCmd' drawer
and edit its tooltypes if they don't suit you.


AquaBulls requires 'Bulletins:' to be assigned to the directory where you
will keep your global bulletins. So add this to 'S:User-Startup' or
wherever you want to keep your assigns:

  assign Bulletins: <path to global bulletins>


The conference specific bulletins are stored in
'<path to conf>Bulletins/'.

If you don't want it to be possible to access the global bulletins from a
conference, then create the file '<conf path>Bulletins/NoGlobalBulls'. The
contents don't matter. An empty file will do fine.


A script for online updating of all/many bulletins (the first kind in the
Features section) is called 'BullBatch.script' and is located in
'<conf path>Bulletins/' or in 'Bulletins:'. If the NoGlobalBulls file
exists, then the script in 'Bulletins:' won't be executed, but otherwise,
BOTH scripts will be executed (if they both exist). The scripts must have
the (s)cript flag to work. To set it, type in shell: 'protect <script
file> +s'.

If you want to use this kind of updating then you must specify an access
level with the ACS.UPDATE tooltype in the configuration icon,
'Doors:AquaBulls/AquaBulls.info'. If that icon contains ACS.UPDATE=200
then only users with access 200 or higher will be able to run the update
script.


A script that updates a _specific_ bulletin every time it is shown is
called 'BULL<nr>.script' and is located in the same directory as the
bulletin which it is supposed to create. The script file must have the
(s)cript flag to work.


Algorithms
~~~~~~~~~~
When the door is started without any bulletin number as argument, it works
like this (presuming that a BullHelp file could be found):

  If '<conf path>Bulletins/BullBatch.script' exists,
     or
     '<conf path>Bulletins/NoGlobalBulls' doesn't exist and
      'Bulletins:BullBatch.script' exists, THEN

    Ask the user if the bulletins should be updated.
    If YES then
       Execute '<conf path>Bulletins/BullBatch.script' if it exists.
       If '<conf path>Bulletins/NoGlobalBulls' doesn't exist then
          Try to execute 'Bulletins:BullBatch.script'.

  Show the BullHelp (plus screen type suffix or '.TXT').
  Wait for the user to select a bulletin number.


The door works like this when the user has selected a bulletin to view:

  If '<conf path>Bulletins/BULL<nr>.script' exists then execute it.

  Try to show '<conf path>Bulletins/BULL<nr>.<screen type suffix>' (/X 3).
  If it failed, try to show '<conf path>Bulletins/BULL<nr>.TXT'.

  If that failed too, and if '<conf path>Bulletins/NoGlobalBulls' doesn't
  exist then continue with:

     If 'Bulletins:BULL<nr>.script' exists then execute it.

     Try to show 'Bulletins:BULL<nr>.<screen type suffix>'.
     If it failed, try to show 'Bulletins:BULL<nr>.TXT'.


The BullHelp is searched for in a corresponding way (no script files for
that).


Contact Me!
~~~~~~~~~~~
If you have any cool ideas for improvement of this door, bug reports,
questions, or whatever, leave me a message on one of the following boards:

NIGHTFALL ................ Prof Do Right ..... +46-90-120369
OVERLOAD (OTL SHQ) ....... Vegas ............. +46-8-54063666
HYSTERIA ................. JAC ............... +46-21-842939
RAISING HELL ............. Psychopath ........ +46-23-26893
INSIDE OUT ............... C/\TE¥E ........... +46-346-58697
SNAKE'S DEN (OTL WHQ) .... Snake ............. +1-513-683-2330
THE HOLE ................. Oldman ............ +1-419-899-2754


History
~~~~~~~
1.0  (1994-04-24) First release version.


Greetings
~~~~~~~~~
               Greetings must go to (in no special order):

      - All Members of Outlaws!! - Prof Do Right/Classic - JAC/TDS -
    - C/\TE¥E/Insane - Ace Caze/Obscene - Wilsom/Obscene - Kid Curry -
   - Psychopath - Vinzi - Karma - Zin - Shapechanger - Rize - Seagull -
    - Remix/Classic - RaJ-Ban - fanta/Therion - Static/Therion - CaT -
     - Dansken - AXL/Attention - Rad!/LSD - Vileius! - Marwin/Duplo -
      - Freddy Kreuger/GOD - Chig/TDS - The Silencer - Vampire/PDY -
       - Crocodile/Obscene - Sal-One - Nojje - Zune/HCD - MadCap -
           - Metalbasher - WarDancer/H&V - The Ones I Forgot! -


[EOF]